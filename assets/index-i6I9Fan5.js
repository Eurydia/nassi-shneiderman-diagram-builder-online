import{k as e,r as o,a3 as r,a4 as n,a5 as t,a6 as s,a7 as i,a8 as c,a0 as d}from"./vendor-Q4L3HY8-.js";import{u as l,S as a}from"./vendor_notistack-S_WITeLc.js";import{S as u,B as h,G as x,g,a as P,T as j,b as k,d as m,u as L,P as p,e as b,f,M as E,h as R,L as y,i as C,j as v,C as T,k as S}from"./vendor_mui-VQxouIhY.js";import{L as w,D as I,S as _}from"./vendor_mui_icon-3zV7h8mC.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)})).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?o.credentials="include":"anonymous"===e.crossOrigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();var O=(e=>(e[e.END=0]="END",e[e.SYMBOL=1]="SYMBOL",e[e.KEYWORD=2]="KEYWORD",e[e.LEFT_PAREN=3]="LEFT_PAREN",e[e.RIGHT_PAREN=4]="RIGHT_PAREN",e[e.LEFT_CURLY=5]="LEFT_CURLY",e[e.RIGHT_CURLY=6]="RIGHT_CURLY",e[e.SEMICOLON=7]="SEMICOLON",e[e.WHITE_SPACE=8]="WHITE_SPACE",e))(O||{});const F=["for","if","else","while","do"],A={"{":5,"}":6,"(":3,")":4,";":7},N=e=>{const o={kind:0,text:""};if(e.cursorPos>=e.contentLength)return o;if(/\s/.test(e.content[e.cursorPos]))return o.kind=8,o.text=e.content[e.cursorPos],e.cursorPos++,o;if(o.text=e.content[e.cursorPos],e.cursorPos++,o.text in A)return o.kind=A[o.text],o;for(;e.cursorPos<e.contentLength&&!(e.content[e.cursorPos]in A)&&!/\s/.test(e.content[e.cursorPos]);)o.text+=e.content[e.cursorPos],e.cursorPos++;return F.includes(o.text)?(o.kind=2,o):(o.kind=1,o)};var Y=(e=>(e[e.END=0]="END",e[e.PROCESS=1]="PROCESS",e[e.LOOP_FIRST=2]="LOOP_FIRST",e[e.LOOP_LAST=3]="LOOP_LAST",e[e.IF_ELSE=4]="IF_ELSE",e[e.FUNC=5]="FUNC",e))(Y||{});const U=e=>({tokens:e,tokenLength:e.length,cursorPos:0}),G=(e,o,r)=>{if(e.cursorPos>=e.tokenLength)return[];if(e.tokens[e.cursorPos].kind!==o)return[];e.cursorPos++;const n=[];let t,s=-1;for(;e.cursorPos<e.tokenLength&&(t=e.tokens[e.cursorPos],e.cursorPos++,t.kind===o&&s--,t.kind===r&&s++,0!==s);)n.push(t);return n},H=e=>{for(;e.cursorPos<e.tokenLength&&e.tokens[e.cursorPos].kind===O.WHITE_SPACE;)e.cursorPos++},B=e=>{if(H(e),e.cursorPos>=e.tokenLength)return{kind:0};let o=e.tokens[e.cursorPos];if(e.cursorPos++,o.kind===O.KEYWORD)switch(o.text){case"for":case"while":return(e=>{const o={kind:2,body:[],condition:[]};return H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_PAREN||(o.condition=G(e,O.LEFT_PAREN,O.RIGHT_PAREN),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.body=W(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))))),o})(e);case"do":return(e=>{const o={kind:3,body:[],condition:[]};return H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.body=W(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.KEYWORD||"while"!==e.tokens[e.cursorPos].text||(e.cursorPos++,H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_PAREN||(o.condition=G(e,O.LEFT_PAREN,O.RIGHT_PAREN),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind===O.SEMICOLON&&e.cursorPos++))),o})(e);case"if":return(e=>{const o={kind:4,condition:[],bodyIf:[],bodyElse:[]};return H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_PAREN||(o.condition=G(e,O.LEFT_PAREN,O.RIGHT_PAREN),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.bodyIf=W(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.KEYWORD||"else"!==e.tokens[e.cursorPos].text||(e.cursorPos++,H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.bodyElse=W(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))))))),o})(e)}if(e.cursorPos--,(e=>{const o=e.cursorPos;return H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.SYMBOL?(e.cursorPos=o,!1):(e.cursorPos++,H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.SYMBOL?(e.cursorPos=o,!1):(e.cursorPos++,H(e),e.cursorPos>=e.tokenLength?(e.cursorPos=o,!1):(G(e,O.LEFT_PAREN,O.RIGHT_PAREN),e.cursorPos>=e.tokenLength?(e.cursorPos=o,!1):(H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY?(e.cursorPos=o,!1):(e.cursorPos=o,!0)))))})(e))return(e=>{const o={kind:5,returnType:[],name:[],args:[],body:[]};return o.returnType.push(e.tokens[e.cursorPos]),e.cursorPos++,H(e),o.name.push(e.tokens[e.cursorPos]),e.cursorPos++,H(e),o.args=G(e,O.LEFT_PAREN,O.RIGHT_PAREN),H(e),o.body=W(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))),o})(e);e.cursorPos++;const r={kind:1,body:[]};if(o.kind===O.SEMICOLON)return r;for(r.body.push(o);e.cursorPos<e.tokenLength&&(o=e.tokens[e.cursorPos],e.cursorPos++,o.kind!==O.END&&o.kind!==O.SEMICOLON);)r.body.push(o);return r},W=e=>{const o=[];let r;for(;0!==(r=B(e)).kind;)o.push(r);return o},D=o=>{const{sx:r}=o;return e.jsx(u,{sx:{position:"absolute",width:"100%",height:"100%",...r},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none",viewBox:"0 0 5 5",strokeWidth:"0.1",children:e.jsx("line",{x1:"0",y1:"0",x2:"5",y2:"5",stroke:"currentColor",strokeLinecap:"round"})})})},M=o=>{const{sx:r}=o;return e.jsx(u,{sx:{position:"absolute",width:"100%",height:"100%",...r},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none",viewBox:"0 0 5 5",strokeWidth:"0.1",children:e.jsx("line",{x1:"0",y1:"5",x2:"5",y2:"0",stroke:"currentColor",strokeLinecap:"round"})})})},z=o=>{const{children:r,borderTop:n,borderBottom:t,borderLeft:s,borderRight:i}=o;return e.jsx(h,{sx:{borderStyle:"solid",borderLeftWidth:s?2:0,borderTopWidth:n?2:0,borderBottomWidth:t?2:0,borderRightWidth:i?2:0},children:r})},$=o=>{const{children:r,...n}=o;return e.jsx(j,{padding:1.5,...n,sx:{fontFamily:"Fira Code",wordBreak:"break-word",fontVariantLigatures:"contextual",...n.sx},children:r??"..."})},K=o=>{const{text:r,...n}=o;return e.jsx(z,{...n,children:e.jsx($,{children:r})})},V=o=>{const{condition:r,body:n,...t}=o;let s=e.jsx(K,{borderTop:!0,borderLeft:!0});return n.length>0&&(s=n.map(((o,r)=>e.jsx(Z,{borderTop:!0,borderLeft:!0,node:o},`subnode-${r}`)))),e.jsxs(z,{...t,children:[e.jsx($,{children:r}),e.jsx(h,{paddingLeft:2,children:s})]})},q=o=>{const{condition:r,body:n,...t}=o;let s=e.jsx(K,{borderBottom:!0,borderLeft:!0});return n.length>0&&(s=n.map(((o,r)=>e.jsx(Z,{node:o,borderBottom:!0,borderLeft:!0},`subnode-${r}`)))),e.jsxs(z,{...t,children:[e.jsx(h,{paddingLeft:2,children:s}),e.jsx($,{children:r})]})},J=o=>{const{condition:r,bodyIf:n,bodyElse:t,...s}=o;let i=e.jsx(K,{borderTop:!0});n.length>0&&(i=n.map(((o,r)=>e.jsx(Z,{borderTop:!0,node:o},`index-${r}`))));let c=e.jsx(K,{borderTop:!0});return t.length>0&&(c=t.map(((o,r)=>e.jsx(Z,{borderTop:!0,node:o},`index-${r}`)))),e.jsx(z,{...s,children:e.jsxs(x,{container:!0,height:"100%",children:[e.jsx(x,{item:!0,xs:12,children:e.jsx($,{align:"center",children:r})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(h,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[e.jsx($,{sx:{zIndex:2,backgroundColor:g[300]},children:"True"}),e.jsx(D,{htmlColor:"black"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(h,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[e.jsx(M,{}),e.jsx($,{sx:{zIndex:2,backgroundColor:g[300]},children:"False"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(P,{height:"100%",sx:{borderColor:"inherit",borderRightStyle:"solid",borderRightWidth:2},children:i})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(P,{height:"100%",children:c})})]})})},X=o=>{const{declaration:r,body:n,...t}=o;let s=e.jsx(K,{borderTop:!0,borderLeft:!0,borderRight:!0});return n.length>0&&(s=n.map(((o,r)=>e.jsx(Z,{node:o,borderTop:!0,borderLeft:!0,borderRight:!0},`subnode-${r}`)))),e.jsxs(z,{...t,children:[e.jsx($,{align:"center",children:r}),e.jsx(h,{paddingX:2,children:s})]})},Q=e=>e.kind!==Y.PROCESS||e.body.map((e=>e.text)).join("").trim().length>0,Z=r=>{const{node:n,...t}=r;switch(n.kind){case Y.FUNC:{let o="...";n.name.length>0&&(o=n.name.map((e=>e.text)).join(""));const r=n.args.map((e=>e.text)).join(""),s=` ${n.returnType.map((e=>e.text)).join("")} ${o}(${r})`;return e.jsx(X,{declaration:s,body:n.body,...t})}case Y.LOOP_FIRST:{let o;return n.condition.length>0&&(o=n.condition.map((e=>e.text)).join("").trim()),e.jsx(V,{...t,condition:o,body:n.body.filter(Q)})}case Y.LOOP_LAST:{let o;return n.condition.length>0&&(o=n.condition.map((e=>e.text)).join("").trim()),e.jsx(q,{...t,condition:o,body:n.body.filter(Q)})}case Y.IF_ELSE:{let o;return n.condition.length>0&&(o=n.condition.map((e=>e.text)).join("").trim()),e.jsx(J,{...t,condition:o,bodyIf:n.bodyIf.filter(Q),bodyElse:n.bodyElse.filter(Q)})}case Y.PROCESS:{let o=n.body.map((e=>e.text)).join("").trim();return 0===o.length&&(o=void 0),e.jsx(K,{...t,text:o})}}return e.jsx(o.Fragment,{})},ee=(o,r,n)=>{let t=e.jsx(j,{fontFamily:"inherit",fontStyle:"italic",children:"Nothing to display."});const s=o.filter((e=>e.kind!==Y.PROCESS||e.body.map((e=>e.text)).join("").trim().length>0));return s.length>0&&(t=s.map(((o,r)=>e.jsx(Z,{node:o,borderLeft:!0,borderTop:!0,borderRight:!0,borderBottom:r===s.length-1},r)))),e.jsx(h,{sx:n,children:e.jsx(h,{id:r,maxWidth:"640px",children:t})})},oe=o=>{const{value:n,onValueChange:t,boxProps:s}=o;return e.jsx(h,{sx:s,children:e.jsx(r,{value:n,onChange:t,theme:"dark"})})},re=o=>{const{collapse:r,...n}=o;return r?e.jsx(k,{title:n.children,children:e.jsxs(m,{...n,startIcon:void 0,endIcon:void 0,children:[n.startIcon,n.endIcon]})}):e.jsx(m,{...n,startIcon:n.startIcon,endIcon:n.endIcon,children:n.children})},ne=()=>{const{enqueueSnackbar:r}=l(),c=o.useRef(null),[d,a]=o.useState(0),u=L((e=>e.breakpoints.down("md"))),[j,k]=o.useState(null),[v,T]=o.useState((()=>{const e=new URL(window.location.href).searchParams.get("preview");return null!==e&&"true"===e})),[S,O]=o.useState([]),[F,A]=o.useState((()=>{const e=new URL(window.location.href).searchParams.get("content");if(null!==e)return window.localStorage.setItem("content",e),e;const o=window.localStorage.getItem("content");return null!==o?o:""}));o.useEffect((()=>{null!==c.current&&a(c.current.getBoundingClientRect().height)}),[c]),o.useEffect((()=>{const e=(e=>{const o=[];let r;for(;0!==(r=N(e)).kind;)o.push(r);return o})({content:(o=F).normalize(),contentLength:o.normalize().length,cursorPos:0});var o;const r=W(U(e));console.info(r),O(r)}),[F]);const Y=o.useCallback((e=>{A(e),window.localStorage.setItem("content",e)}),[]),G=o.useCallback((async()=>{const e=document.getElementById("structogram-preview-region");null!==e&&(n(e).then((e=>{null!==e&&(window.saveAs?window.saveAs(e,"structogram"):t.saveAs(e,"structogram"))})),r("Saved structogram as SVG",{variant:"info"}))}),[r]),H=o.useCallback((async()=>{const e=document.getElementById("structogram-preview-region");null!==e&&(s(e).then((e=>{null!==e&&(window.saveAs?window.saveAs(e,"structogram"):t.saveAs(e,"structogram"))})),r("Saved structogram as PNG",{variant:"info"}))}),[r]),B=o.useCallback((async()=>{const e=document.getElementById("structogram-preview-region");null!==e&&(i(e).then((e=>{null!==e&&(window.saveAs?window.saveAs(e,"structogram"):t.saveAs(e,"structogram"))})),r("Saved structogram as JPEG",{variant:"info"}))}),[r]),D=o.useCallback((()=>{T((e=>!e))}),[]),M=o.useCallback((()=>{const e=new URL(window.location.href);e.searchParams.set("preview","true"),e.searchParams.set("content",F),navigator.clipboard.writeText(e.href),r("Copied link to clipboard",{variant:"info"})}),[F,r]),z=o.useCallback((e=>{k(e.currentTarget)}),[]),$=o.useCallback((()=>{k(null)}),[]);return e.jsxs(o.Fragment,{children:[e.jsxs(h,{children:[e.jsx(p,{ref:c,square:!0,elevation:0,sx:{padding:1},children:e.jsxs(P,{display:"flex",direction:"row",justifyContent:"space-between",children:[e.jsxs(b,{variant:"outlined",children:[e.jsx(m,{onClick:D,children:v?"Show code":"Hide code"}),e.jsx(m,{href:"https://eurydia.github.io/project-nassi-shneiderman-diagram-builder-online-docs/",component:"a",target:"_blank",endIcon:e.jsx(w,{}),children:"docs"})]}),e.jsxs(b,{variant:"outlined",children:[e.jsx(re,{collapse:u,startIcon:e.jsx(I,{}),onClick:z,children:"EXPORT"}),e.jsx(re,{collapse:u,endIcon:e.jsx(_,{}),onClick:M,children:"SHARE"})]})]})}),e.jsx(h,{children:e.jsxs(x,{container:!0,children:[e.jsx(x,{item:!0,xs:12,lg:6,display:v?"none":void 0,children:e.jsx(oe,{value:F,onValueChange:Y,boxProps:{overflowY:"auto",height:`calc(100vh - ${d}px)`}})}),e.jsx(x,{item:!0,xs:!0,lg:!0,display:u&&!v?"none":void 0,children:ee(S,"structogram-preview-region",{padding:4,overflowY:"auto",backgroundColor:g[300],borderColor:g[700],userSelect:"none",height:`calc(100vh - ${d}px)`})})]})})]}),e.jsx(f,{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},anchorEl:j,open:null!==j,onClose:$,children:e.jsx(p,{sx:{padding:1},children:e.jsxs(E,{children:[e.jsxs(R,{onClick:B,children:[e.jsx(y,{children:e.jsx(I,{fontSize:"small"})}),e.jsx(C,{children:"Save as JPEG"})]}),e.jsxs(R,{onClick:H,children:[e.jsx(y,{children:e.jsx(I,{fontSize:"small"})}),e.jsx(C,{children:"Save as PNG"})]}),e.jsxs(R,{onClick:G,children:[e.jsx(y,{children:e.jsx(I,{fontSize:"small"})}),e.jsx(C,{children:"Save as SVG"})]})]})})})]})},te=v({palette:{mode:"dark"}}),se=()=>e.jsxs(o.Fragment,{children:[e.jsx(T,{}),e.jsx(S,{theme:te,children:e.jsx(a,{preventDuplicate:!0,autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(ne,{})})})]});c.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(se,{})}));
//# sourceMappingURL=index-i6I9Fan5.js.map
