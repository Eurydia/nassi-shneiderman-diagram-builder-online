import{a as e,_ as t}from"./@babel-YlazYIEB.js";import{r as a,j as i}from"./react-Fif6PzBx.js";import{c as s,d as n,s as o,h as r,f as l,a as c,l as h,b as u,e as d,g as p,i as f,j as m,k as g,m as b,E as S,n as v,o as y,p as x,q as w,r as C,t as W,u as k,v as E,w as H,x as O,y as j,z as K,A as T,B as z,C as B,D as N,F as A,S as F}from"./@codemirror-CcIHR75-.js";var M=function(e){void 0===e&&(e={});var{crosshairCursor:t=!1}=e,a=[];!1!==e.closeBracketsKeymap&&(a=a.concat(s)),!1!==e.defaultKeymap&&(a=a.concat(n)),!1!==e.searchKeymap&&(a=a.concat(o)),!1!==e.historyKeymap&&(a=a.concat(r)),!1!==e.foldKeymap&&(a=a.concat(l)),!1!==e.completionKeymap&&(a=a.concat(c)),!1!==e.lintKeymap&&(a=a.concat(h));var i=[];return!1!==e.lineNumbers&&i.push(u()),!1!==e.highlightActiveLineGutter&&i.push(d()),!1!==e.highlightSpecialChars&&i.push(p()),!1!==e.history&&i.push(f()),!1!==e.foldGutter&&i.push(m()),!1!==e.drawSelection&&i.push(g()),!1!==e.dropCursor&&i.push(b()),!1!==e.allowMultipleSelections&&i.push(S.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&i.push(v()),!1!==e.syntaxHighlighting&&i.push(y(K,{fallback:!0})),!1!==e.bracketMatching&&i.push(x()),!1!==e.closeBrackets&&i.push(w()),!1!==e.autocompletion&&i.push(C()),!1!==e.rectangularSelection&&i.push(W()),!1!==t&&i.push(k()),!1!==e.highlightActiveLine&&i.push(E()),!1!==e.highlightSelectionMatches&&i.push(H()),e.tabSize&&"number"==typeof e.tabSize&&i.push(O.of(" ".repeat(e.tabSize))),i.concat([j.of(a.flat())]).filter(Boolean)},L=T.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),U=A.define(),D=[];function R(e){var{value:t,selection:i,onChange:s,onStatistics:n,onCreateEditor:o,onUpdate:r,extensions:l=D,autoFocus:c,theme:h="light",height:u=null,minHeight:d=null,maxHeight:p=null,width:f=null,minWidth:m=null,maxWidth:g=null,placeholder:b="",editable:v=!0,readOnly:y=!1,indentWithTab:x=!0,basicSetup:w=!0,root:C,initialState:W}=e,[k,E]=a.useState(),[H,O]=a.useState(),[K,A]=a.useState(),R=T.theme({"&":{height:u,minHeight:d,maxHeight:p,width:f,minWidth:m,maxWidth:g},"& .cm-scroller":{height:"100% !important"}}),G=T.updateListener.of((e=>{if(e.docChanged&&"function"==typeof s&&!e.transactions.some((e=>e.annotation(U)))){var t=e.state.doc.toString();s(t,e)}n&&n((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to))),selectedText:e.state.selection.ranges.some((e=>!e.empty))}))(e))})),I=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:a=!0,readOnly:i=!1,theme:s="light",placeholder:n="",basicSetup:o=!0}=e,r=[];switch(t&&r.unshift(j.of([z])),o&&("boolean"==typeof o?r.unshift(M()):r.unshift(M(o))),n&&r.unshift(B(n)),s){case"light":r.push(L);break;case"dark":r.push(N);break;case"none":break;default:r.push(s)}return!1===a&&r.push(T.editable.of(!1)),i&&r.push(S.readOnly.of(!0)),[...r]}({theme:h,editable:v,readOnly:y,placeholder:b,indentWithTab:x,basicSetup:w}),q=[G,R,...I];return r&&"function"==typeof r&&q.push(T.updateListener.of(r)),q=q.concat(l),a.useEffect((()=>{if(k&&!K){var e={doc:t,selection:i,extensions:q},a=W?S.fromJSON(W.json,e,W.fields):S.create(e);if(A(a),!H){var s=new T({state:a,parent:k,root:C});O(s),o&&o(s,a)}}return()=>{H&&(A(void 0),O(void 0))}}),[k,K]),a.useEffect((()=>E(e.container)),[e.container]),a.useEffect((()=>()=>{H&&(H.destroy(),O(void 0))}),[H]),a.useEffect((()=>{c&&H&&H.focus()}),[c,H]),a.useEffect((()=>{H&&H.dispatch({effects:F.reconfigure.of(q)})}),[h,l,u,d,p,f,m,g,b,v,y,x,w,s,r]),a.useEffect((()=>{if(void 0!==t){var e=H?H.state.doc.toString():"";H&&t!==e&&H.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[U.of(!0)]})}}),[t,H]),{state:K,setState:A,view:H,setView:O,container:k,setContainer:E}}var G=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],I=a.forwardRef(((s,n)=>{var{className:o,value:r="",selection:l,extensions:c=[],onChange:h,onStatistics:u,onCreateEditor:d,onUpdate:p,autoFocus:f,theme:m="light",height:g,minHeight:b,maxHeight:S,width:v,minWidth:y,maxWidth:x,basicSetup:w,placeholder:C,indentWithTab:W,editable:k,readOnly:E,root:H,initialState:O}=s,j=e(s,G),K=a.useRef(null),{state:T,view:z,container:B}=R({container:K.current,root:H,value:r,autoFocus:f,theme:m,height:g,minHeight:b,maxHeight:S,width:v,minWidth:y,maxWidth:x,basicSetup:w,placeholder:C,indentWithTab:W,editable:k,readOnly:E,selection:l,onChange:h,onStatistics:u,onCreateEditor:d,onUpdate:p,extensions:c,initialState:O});if(a.useImperativeHandle(n,(()=>({editor:K.current,state:T,view:z})),[K,B,T,z]),"string"!=typeof r)throw new Error("value must be typeof string but got "+typeof r);var N="string"==typeof m?"cm-theme-"+m:"cm-theme";return i.jsx("div",t({ref:K,className:N+(o?" "+o:"")},j))}));I.displayName="CodeMirror";export{I as R};
//# sourceMappingURL=@uiw-J5UT4H6Q.js.map
