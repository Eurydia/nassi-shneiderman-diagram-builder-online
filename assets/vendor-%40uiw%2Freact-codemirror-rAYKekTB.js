import{a0 as e,a1 as t,a2 as a,a3 as i,a4 as n,a5 as s,a6 as o,a7 as r,r as l,a8 as c,a as h,j as d,_ as u}from"./vendor-_esTP_-Y.js";var f=e.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),m=r.define(),g=[];function p(r){var{value:h,selection:d,onChange:u,onStatistics:p,onCreateEditor:b,onUpdate:v,extensions:S=g,autoFocus:y,theme:x="light",height:W=null,minHeight:w=null,maxHeight:C=null,width:E=null,minWidth:H=null,maxWidth:O=null,placeholder:k="",editable:T=!0,readOnly:N=!1,indentWithTab:j=!0,basicSetup:F=!0,root:U,initialState:R}=r,[z,A]=l.useState(),[B,D]=l.useState(),[L,I]=l.useState(),J=e.theme({"&":{height:W,minHeight:w,maxHeight:C,width:E,minWidth:H,maxWidth:O},"& .cm-scroller":{height:"100% !important"}}),M=e.updateListener.of((e=>{if(e.docChanged&&"function"==typeof u&&!e.transactions.some((e=>e.annotation(m)))){var t=e.state.doc.toString();u(t,e)}p&&p((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to))),selectedText:e.state.selection.ranges.some((e=>!e.empty))}))(e))})),V=function(r){void 0===r&&(r={});var{indentWithTab:l=!0,editable:c=!0,readOnly:h=!1,theme:d="light",placeholder:u="",basicSetup:m=!0}=r,g=[];switch(l&&g.unshift(t.of([a])),m&&("boolean"==typeof m?g.unshift(i()):g.unshift(i(m))),u&&g.unshift(n(u)),d){case"light":g.push(f);break;case"dark":g.push(s);break;case"none":break;default:g.push(d)}return!1===c&&g.push(e.editable.of(!1)),h&&g.push(o.readOnly.of(!0)),[...g]}({theme:x,editable:T,readOnly:N,placeholder:k,indentWithTab:j,basicSetup:F}),_=[M,J,...V];return v&&"function"==typeof v&&_.push(e.updateListener.of(v)),_=_.concat(S),l.useEffect((()=>{if(z&&!L){var t={doc:h,selection:d,extensions:_},a=R?o.fromJSON(R.json,t,R.fields):o.create(t);if(I(a),!B){var i=new e({state:a,parent:z,root:U});D(i),b&&b(i,a)}}return()=>{B&&(I(void 0),D(void 0))}}),[z,L]),l.useEffect((()=>A(r.container)),[r.container]),l.useEffect((()=>()=>{B&&(B.destroy(),D(void 0))}),[B]),l.useEffect((()=>{y&&B&&B.focus()}),[y,B]),l.useEffect((()=>{B&&B.dispatch({effects:c.reconfigure.of(_)})}),[x,S,W,w,C,E,H,O,k,T,N,j,F,u,v]),l.useEffect((()=>{if(void 0!==h){var e=B?B.state.doc.toString():"";B&&h!==e&&B.dispatch({changes:{from:0,to:e.length,insert:h||""},annotations:[m.of(!0)]})}}),[h,B]),{state:L,setState:I,view:B,setView:D,container:z,setContainer:A}}var b=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],v=l.forwardRef(((e,t)=>{var{className:a,value:i="",selection:n,extensions:s=[],onChange:o,onStatistics:r,onCreateEditor:c,onUpdate:f,autoFocus:m,theme:g="light",height:v,minHeight:S,maxHeight:y,width:x,minWidth:W,maxWidth:w,basicSetup:C,placeholder:E,indentWithTab:H,editable:O,readOnly:k,root:T,initialState:N}=e,j=h(e,b),F=l.useRef(null),{state:U,view:R,container:z}=p({container:F.current,root:T,value:i,autoFocus:m,theme:g,height:v,minHeight:S,maxHeight:y,width:x,minWidth:W,maxWidth:w,basicSetup:C,placeholder:E,indentWithTab:H,editable:O,readOnly:k,selection:n,onChange:o,onStatistics:r,onCreateEditor:c,onUpdate:f,extensions:s,initialState:N});if(l.useImperativeHandle(t,(()=>({editor:F.current,state:U,view:R})),[F,z,U,R]),"string"!=typeof i)throw new Error("value must be typeof string but got "+typeof i);var A="string"==typeof g?"cm-theme-"+g:"cm-theme";return d.jsx("div",u({ref:F,className:A+(a?" "+a:"")},j))}));v.displayName="CodeMirror";export{v as R};
//# sourceMappingURL=vendor-%40uiw%2Freact-codemirror-rAYKekTB.js.map
