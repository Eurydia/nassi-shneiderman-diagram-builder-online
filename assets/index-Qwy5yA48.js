import{k as e,r as n,a3 as t,a4 as r,a5 as o,a6 as s,a7 as i,a8 as c,a0 as l}from"./vendor-NBuHRTTu.js";import{u as a,S as d}from"./vendor_notistack-Y8UdMtaZ.js";import{S as u,B as h,G as x,g as b,a as m,T as k,b as f,d as g,u as p,P as N,e as P,f as j,M as L,h as R,L as E,i as C,j as I,C as O,k as T}from"./vendor_mui-NN2i3a7p.js";import{L as y,D as v,S as _}from"./vendor_mui_icon-oFfa58I9.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)})).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();var S=(e=>(e[e.EOF=0]="EOF",e[e.SYMBOL=1]="SYMBOL",e[e.KEYWORD=2]="KEYWORD",e[e.LEFT_PAREN=3]="LEFT_PAREN",e[e.RIGHT_PAREN=4]="RIGHT_PAREN",e[e.LEFT_CURLY=5]="LEFT_CURLY",e[e.RIGHT_CURLY=6]="RIGHT_CURLY",e[e.SEMICOLON=7]="SEMICOLON",e[e.WHITE_SPACE=8]="WHITE_SPACE",e))(S||{});const w=["for","if","else","while","do"],F={"{":5,"}":6,"(":3,")":4,";":7},U=e=>{const n={kind:0,text:"",lineNumber:e.cursorRow,charNumber:e.cursorCol};if(e.cursorPos>=e.contentLength)return n;if(n.text=e.content[e.cursorPos],e.cursorPos++,e.cursorCol++,/\s/.test(n.text))return n.kind=8,"\n"===n.text&&(e.cursorRow++,e.cursorCol=1),n;if(n.text in F)return n.kind=F[n.text],n;for(;e.cursorPos<e.contentLength&&!(e.content[e.cursorPos]in F)&&!/\s/.test(e.content[e.cursorPos]);)n.text+=e.content[e.cursorPos],e.cursorPos++,e.cursorCol++;return w.includes(n.text)?(n.kind=2,n):(n.kind=1,n)};var $=(e=>(e[e.EOF=0]="EOF",e[e.ERROR=1]="ERROR",e[e.PROCESS=2]="PROCESS",e[e.LOOP_FIRST=3]="LOOP_FIRST",e[e.LOOP_LAST=4]="LOOP_LAST",e[e.IF_ELSE=5]="IF_ELSE",e[e.FUNCTION=6]="FUNCTION",e))($||{});const Y=e=>({tokens:e,tokenLength:e.length,cursorPos:0}),A=(e,n,t)=>{if(e.cursorPos>=e.tokenLength)return[];if(e.tokens[e.cursorPos].kind!==n)return[];e.cursorPos++;const r=[];let o,s=-1;for(;e.cursorPos<e.tokenLength&&(o=e.tokens[e.cursorPos],e.cursorPos++,o.kind===n&&s--,o.kind===t&&s++,r.push(o),0!==s););return r},G=e=>{for(;e.cursorPos<e.tokenLength&&e.tokens[e.cursorPos].kind===S.WHITE_SPACE;)e.cursorPos++},M=e=>{if(G(e),e.cursorPos>=e.tokenLength)return{kind:0};const n=e.tokens[e.cursorPos];if(e.cursorPos++,n.kind===S.KEYWORD)switch(n.text){case"for":case"while":return(e=>{const n={kind:3,body:[],condition:[]};let t=e.tokens[e.cursorPos-1];if(G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-first loop declaration. Missing a "(" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.LEFT_PAREN){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in test-first loop declaration. Expected a "(" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}if(t=e.tokens[e.cursorPos],n.condition=A(e,S.LEFT_PAREN,S.RIGHT_PAREN),n.condition.length>0&&(t=n.condition[n.condition.length-1]),0===n.condition.length||t.kind!==S.RIGHT_PAREN){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-first loop declaration. Missing a ")" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(n.condition.pop(),G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-first loop declaration. Missing a "{" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.LEFT_CURLY){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in test-first loop declaration. Expected a "{" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}t=e.tokens[e.cursorPos];const r=A(e,S.LEFT_CURLY,S.RIGHT_CURLY);if(r.length>0&&(t=r[r.length-1]),0===r.length||t.kind!==S.RIGHT_CURLY){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-first loop declaration. Missing a "}" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}return r.pop(),n.body=H(Y(r)),n})(e);case"do":return(e=>{const n={kind:4,body:[],condition:[]};let t=e.tokens[e.cursorPos-1];if(G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-last loop declaration. Missing a "{" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.LEFT_CURLY){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in test-last loop declaration. Expected a "{" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}t=e.tokens[e.cursorPos];const r=A(e,S.LEFT_CURLY,S.RIGHT_CURLY);if(r.length>0&&(t=r[r.length-1]),0===r.length||t.kind!==S.RIGHT_CURLY){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-last loop declaration. Missing "}" token.',context:e,caretOffset:e.length+1,lineNumber:n,charNumber:r}}if(r.pop(),G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-last loop declaration. Missing a "while" token.',context:e,caretOffset:e.length+1,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.KEYWORD||"while"!==e.tokens[e.cursorPos].text){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in test-last loop declaration. Expected a "while" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}if(t=e.tokens[e.cursorPos],e.cursorPos++,G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-last loop declaration. Missing a "(" token.',context:e,caretOffset:e.length+1,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.LEFT_PAREN){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in test-last loop declaration. Expected a "(" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}if(t=e.tokens[e.cursorPos],n.condition=A(e,S.LEFT_PAREN,S.RIGHT_PAREN),n.condition.length>0&&(t=n.condition[n.condition.length-1]),0===n.condition.length||t.kind!==S.RIGHT_PAREN){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-last loop declaration. Missing a ")" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(n.condition.pop(),G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete test-last loop declaration. Missing a ";" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.SEMICOLON){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in test-last loop declaration. Expected a ";" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}return e.cursorPos++,n.body=H(Y(r)),n})(e);case"if":return(e=>{const n={kind:5,condition:[],bodyIf:[],bodyElse:[]};let t=e.tokens[e.cursorPos-1];if(G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete branching block (if) declaration. Missing a "(" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.LEFT_PAREN){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in branching block (if) declaration. Expected a "(" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}if(t=e.tokens[e.cursorPos],n.condition=A(e,S.LEFT_PAREN,S.RIGHT_PAREN),n.condition.length>0&&(t=n.condition[n.condition.length-1]),0===n.condition.length||t.kind!==S.RIGHT_PAREN){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete branching block (if) declaration. Missing a ")" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(n.condition.pop(),G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete branching block (if) declaration. Missing a "{" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.LEFT_CURLY){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in branching block (if) declaration. Expected a "{" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}t=e.tokens[e.cursorPos];const r=A(e,S.LEFT_CURLY,S.RIGHT_CURLY);if(r.length>0&&(t=r[r.length-1]),0===r.length||t.kind!==S.RIGHT_CURLY){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete branching block (if) declaration. Missing a "}" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(r.pop(),n.bodyIf=H(Y(r)),G(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==S.KEYWORD||"else"!==e.tokens[e.cursorPos].text)return n;if(t=e.tokens[e.cursorPos],e.cursorPos++,G(e),e.cursorPos>=e.tokenLength){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete branching block (if-else) declaration. Missing a "{" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}if(e.tokens[e.cursorPos].kind!==S.LEFT_CURLY){const{text:n}=t,{text:r,lineNumber:o,charNumber:s}=e.tokens[e.cursorPos];return{kind:1,reason:`Unexpected token found in branching block (if-else) declaration. Expected a "{" token but found "${r}" instead.`,context:`${n} ${r}`,caretOffset:n.length+1,lineNumber:o,charNumber:s}}t=e.tokens[e.cursorPos];const o=A(e,S.LEFT_CURLY,S.RIGHT_CURLY);if(o.length>0&&(t=o[o.length-1]),0===o.length||t.kind!==S.RIGHT_CURLY){const{text:e,lineNumber:n,charNumber:r}=t;return{kind:1,reason:'Incomplete branching block (if-else) declaration. Missing a "}" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:r}}return o.pop(),n.bodyElse=H(Y(o)),n})(e)}const t=[n];let r=n;if(r.kind===S.SEMICOLON)return{kind:2,body:[]};for(;e.cursorPos<e.tokenLength&&e.tokens[e.cursorPos].kind!==S.SEMICOLON&&e.tokens[e.cursorPos].kind!==S.LEFT_CURLY;)r=e.tokens[e.cursorPos],t.push(e.tokens[e.cursorPos]),e.cursorPos++;if(e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==S.LEFT_CURLY&&e.tokens[e.cursorPos].kind!==S.SEMICOLON){const{text:e,lineNumber:n,charNumber:t}=r;return{kind:1,reason:'Incomplete process declaration. Missing a ";" token.',context:e,caretOffset:e.length,lineNumber:n,charNumber:t}}if(e.tokens[e.cursorPos].kind===S.SEMICOLON)return e.cursorPos++,{kind:2,body:t};r=e.tokens[e.cursorPos];const o=A(e,S.LEFT_CURLY,S.RIGHT_CURLY);if(o.length>0&&(r=o[o.length-1]),0===o.length||r.kind!==S.RIGHT_CURLY){const{text:e,lineNumber:n,charNumber:t}=r;return{kind:1,reason:'Incomplete function declaration. Missing a "}" token.',context:e,caretOffset:e.length+1,lineNumber:n,charNumber:t}}return o.pop(),{kind:6,declaration:t,body:H(Y(o))}},H=e=>{const n=[];let t;for(;0!==(t=M(e)).kind&&(n.push(t),1!==t.kind););return n},B=n=>{const{sx:t}=n;return e.jsx(u,{sx:{position:"absolute",width:"100%",height:"100%",...t},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none",viewBox:"0 0 5 5",strokeWidth:"0.1",children:e.jsx("line",{x1:"0",y1:"0",x2:"5",y2:"5",stroke:"currentColor",strokeLinecap:"round"})})})},W=n=>{const{sx:t}=n;return e.jsx(u,{sx:{position:"absolute",width:"100%",height:"100%",...t},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none",viewBox:"0 0 5 5",strokeWidth:"0.1",children:e.jsx("line",{x1:"0",y1:"5",x2:"5",y2:"0",stroke:"currentColor",strokeLinecap:"round"})})})},z=n=>{const{children:t,borderTop:r,borderBottom:o,borderLeft:s,borderRight:i}=n;return e.jsx(h,{sx:{borderStyle:"solid",borderLeftWidth:s?2:0,borderTopWidth:r?2:0,borderBottomWidth:o?2:0,borderRightWidth:i?2:0},children:t})},D=n=>{const{children:t,...r}=n;return e.jsx(k,{padding:1.5,...r,sx:{fontFamily:"Fira Code",wordBreak:"break-word",fontVariantLigatures:"contextual",...r.sx},children:t??"-"})},K=n=>{const{bodyTokens:t,...r}=n;let o;return void 0!==t&&(o=t.map((e=>e.text)).join("").trim(),0===o.length&&(o=void 0)),e.jsx(z,{...r,children:e.jsx(D,{children:o})})},V=n=>{const{conditionTokens:t,body:r,...o}=n;let s;void 0!==t&&t.length>0&&(s=t.map((e=>e.text)).join("").trim());let i=e.jsx(K,{borderTop:!0,borderLeft:!0});return r.length>0&&(i=r.map(((n,t)=>e.jsx(Z,{borderTop:!0,borderLeft:!0,node:n},`subnode-${t}`)))),e.jsxs(z,{...o,children:[e.jsx(D,{children:s}),e.jsx(h,{paddingLeft:2,children:i})]})},q=n=>{const{conditionTokens:t,body:r,...o}=n;let s;void 0!==t&&t.length>0&&(s=t.map((e=>e.text)).join("").trim());let i=e.jsx(K,{borderBottom:!0,borderLeft:!0});return r.length>0&&(i=r.map(((n,t)=>e.jsx(Z,{node:n,borderBottom:!0,borderLeft:!0},`subnode-${t}`)))),e.jsxs(z,{...o,children:[e.jsx(h,{paddingLeft:2,children:i}),e.jsx(D,{children:s})]})},J=n=>{const{conditionTokens:t,bodyIf:r,bodyElse:o,...s}=n;let i;void 0!==t&&t.length>0&&(i=t.map((e=>e.text)).join("").trim());let c=e.jsx(K,{borderTop:!0});r.length>0&&(c=r.map(((n,t)=>e.jsx(Z,{borderTop:!0,node:n},`index-${t}`))));let l=e.jsx(K,{borderTop:!0});return o.length>0&&(l=o.map(((n,t)=>e.jsx(Z,{borderTop:!0,node:n},`index-${t}`)))),e.jsx(z,{...s,children:e.jsxs(x,{container:!0,height:"100%",children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(D,{align:"center",children:i})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(h,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[e.jsx(D,{sx:{zIndex:2,backgroundColor:b[300]},children:"True"}),e.jsx(B,{htmlColor:"black"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(h,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[e.jsx(W,{}),e.jsx(D,{sx:{zIndex:2,backgroundColor:b[300]},children:"False"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(m,{height:"100%",sx:{borderColor:"inherit",borderRightStyle:"solid",borderRightWidth:2},children:c})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(m,{height:"100%",children:l})})]})})},X=n=>{const{declarationTokens:t,body:r,...o}=n;let s;void 0!==t&&t.length>0&&(s=t.map((e=>e.text)).join("").trim());let i=e.jsx(K,{borderTop:!0,borderLeft:!0,borderRight:!0});return r.length>0&&(i=r.map(((n,t)=>e.jsx(Z,{node:n,borderTop:!0,borderLeft:!0,borderRight:!0},`subnode-${t}`)))),e.jsxs(z,{...o,children:[e.jsx(D,{align:"center",children:s}),e.jsx(h,{paddingX:2,children:i})]})},Q=n=>{const{context:t,reason:r,lineNumber:o,characterNumber:s,caretOffset:i,...c}=n,l=`At line ${o}, character ${s}: ${r}`,a="~".repeat(i)+"^";return e.jsxs(z,{...c,children:[e.jsx(D,{children:l}),e.jsx(D,{paddingY:0,children:t}),e.jsx(D,{paddingY:0,children:a})]})},Z=t=>{const{node:r,...o}=t;switch(r.kind){case $.ERROR:return e.jsx(Q,{...o,caretOffset:r.caretOffset,context:r.context,reason:r.reason,lineNumber:r.lineNumber,characterNumber:r.charNumber});case $.FUNCTION:return e.jsx(X,{declarationTokens:r.declaration,body:r.body,...o});case $.LOOP_FIRST:return e.jsx(V,{...o,conditionTokens:r.condition,body:r.body});case $.LOOP_LAST:return e.jsx(q,{...o,conditionTokens:r.condition,body:r.body});case $.IF_ELSE:return e.jsx(J,{...o,conditionTokens:r.condition,bodyIf:r.bodyIf,bodyElse:r.bodyElse});case $.PROCESS:return e.jsx(K,{...o,bodyTokens:r.body})}return e.jsx(n.Fragment,{})},ee=n=>{const{nodes:t,id:r,boxProps:o}=n;let s=e.jsx(k,{fontFamily:"inherit",fontStyle:"italic",children:"Nothing to display."});return t.length>0&&(s=t.map(((n,r)=>e.jsx(Z,{node:n,borderLeft:!0,borderTop:!0,borderRight:!0,borderBottom:r===t.length-1},`top-level-node-${r}`)))),e.jsx(h,{sx:{...o,backgroundColor:b[300],borderColor:b[700]},children:e.jsx(h,{id:r,sx:{maxWidth:"640px",backgroundColor:b[300],borderColor:b[700]},children:s})})},ne=n=>{const{value:r,onValueChange:o,boxProps:s}=n;return e.jsx(h,{sx:s,children:e.jsx(t,{value:r,onChange:o,theme:"dark"})})},te=n=>{const{collapse:t,...r}=n;return t?e.jsx(f,{title:r.children,children:e.jsxs(g,{...r,startIcon:void 0,endIcon:void 0,children:[r.startIcon,r.endIcon]})}):e.jsx(g,{...r,startIcon:r.startIcon,endIcon:r.endIcon,children:r.children})},re=()=>{const{enqueueSnackbar:t}=a(),c=n.useRef(null),[l,d]=n.useState(0),u=p((e=>e.breakpoints.down("md"))),{exportJPEG:b,exportPNG:k,exportSVG:f}=(e=>{const t=n.useCallback((async()=>{const n=document.getElementById(e);return null!==n&&r(n).then((e=>null!==e&&(o.saveAs(e,"structogram"),!0)))}),[e]),c=n.useCallback((async()=>{const n=document.getElementById(e);return null!==n&&s(n).then((e=>null!==e&&(o.saveAs(e,"structogram"),!0)))}),[e]);return{exportSVG:t,exportJPEG:n.useCallback((async()=>{const n=document.getElementById(e);return null!==n&&i(n).then((e=>null!==e&&(o.saveAs(e,"structogram"),!0)))}),[e]),exportPNG:c}})("structogram-preview-region"),{editorContent:I,setEditorContent:O}=((e,t)=>{const[r,o]=n.useState((()=>{const n=new URL(e).searchParams.get("content");if(null!==n)return window.localStorage.setItem(t,n),n;const r=window.localStorage.getItem(t);return null!==r?r:""}));return{editorContent:r,setEditorContent:n.useCallback((e=>{o(e),window.localStorage.setItem(t,e)}),[t])}})(window.location.href,"autosaveContent"),[T,S]=n.useState([]),[w,F]=n.useState(null),[$,A]=n.useState((e=>{const n=new URL(e).searchParams.get("preview");return null!==n&&"true"===n})(window.location.href));n.useEffect((()=>{null!==c.current&&d(c.current.getBoundingClientRect().height)}),[c]),n.useEffect((()=>{const e=(e=>{const n=[];let t;for(;0!==(t=U(e)).kind;)n.push(t);return n})((e=>{const n=(e=>{let n="",t=0;for(;t<e.length;){if(t+1<e.length&&"/"===e[t]&&"/"===e[t+1])for(;t<e.length&&"\n"!==e[t];)t++;n+=e[t],t++}return n})(e.normalize());return{content:n,contentLength:n.length,cursorPos:0,cursorCol:1,cursorRow:1}})(I)),n=H(Y(e));S(n)}),[I]);const G=n.useCallback((()=>{A((e=>!e))}),[]),M=n.useCallback((()=>{navigator.clipboard.writeText(((e,n)=>{const t=new URL(n);return t.searchParams.set("preview","true"),t.searchParams.set("content",e),t.href})(I,window.location.href)),t("Link copied to clipboard",{variant:"info"})}),[t,I]),B=n.useCallback((e=>{F(e.currentTarget)}),[]),W=n.useCallback((()=>{F(null)}),[]),z=async e=>{e().then((e=>{e?t("Diagram exported",{variant:"info"}):t("Failed to export diagram",{variant:"error"})}))};return e.jsxs(n.Fragment,{children:[e.jsxs(h,{children:[e.jsx(N,{ref:c,square:!0,elevation:0,sx:{padding:1},children:e.jsxs(m,{display:"flex",direction:"row",justifyContent:"space-between",children:[e.jsxs(P,{variant:"outlined",children:[e.jsx(g,{onClick:G,children:$?"Show code":"Hide code"}),e.jsx(g,{href:"https://eurydia.github.io/project-nassi-shneiderman-diagram-builder-online-docs/",component:"a",target:"_blank",endIcon:e.jsx(y,{}),children:"docs"})]}),e.jsxs(P,{variant:"outlined",children:[e.jsx(te,{collapse:u,startIcon:e.jsx(v,{}),onClick:B,children:"EXPORT"}),e.jsx(te,{collapse:u,endIcon:e.jsx(_,{}),onClick:M,children:"SHARE"})]})]})}),e.jsx(h,{children:e.jsxs(x,{container:!0,children:[e.jsx(x,{item:!0,xs:12,lg:6,display:$?"none":void 0,children:e.jsx(ne,{value:I,onValueChange:O,boxProps:{overflowY:"auto",height:`calc(100vh - ${l}px)`}})}),e.jsx(x,{item:!0,xs:!0,lg:!0,display:u&&!$?"none":void 0,children:e.jsx(ee,{nodes:T,id:"structogram-preview-region",boxProps:{padding:4,overflowY:"auto",userSelect:"none",height:`calc(100vh - ${l}px)`}})})]})})]}),e.jsx(j,{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},anchorEl:w,open:null!==w,onClose:W,children:e.jsx(N,{sx:{padding:1},children:e.jsxs(L,{children:[e.jsxs(R,{onClick:()=>z(b),children:[e.jsx(E,{children:e.jsx(v,{fontSize:"small"})}),e.jsx(C,{children:"Save as JPEG"})]}),e.jsxs(R,{onClick:()=>z(k),children:[e.jsx(E,{children:e.jsx(v,{fontSize:"small"})}),e.jsx(C,{children:"Save as PNG"})]}),e.jsxs(R,{onClick:()=>z(f),children:[e.jsx(E,{children:e.jsx(v,{fontSize:"small"})}),e.jsx(C,{children:"Save as SVG"})]})]})})})]})},oe=I({palette:{mode:"dark"}}),se=()=>e.jsxs(n.Fragment,{children:[e.jsx(O,{}),e.jsx(T,{theme:oe,children:e.jsx(d,{preventDuplicate:!0,autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(re,{})})})]});c.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(se,{})}));
//# sourceMappingURL=index-Qwy5yA48.js.map
