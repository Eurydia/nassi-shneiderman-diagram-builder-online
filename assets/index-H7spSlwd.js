import{j as r,r as u,e as q,f as X,d as Q}from"./vendor_react-Z-u8uJkV.js";import{u as Z,S as K}from"./vendor_notistack-jpyCdoLU.js";import{t as ee,a as te,b as re}from"./vendor_html_to_image-uK6yt3sc.js";import{F as C}from"./vendor_fs-ddjK0M45.js";import{B as x,S as B,G as g,g as N,T as Y,a as oe,b as w,u as ne,P as A,d as se,e as F,f as ie,M as ce,h as p,L as I,i as T,j as de,C as ae,k as le}from"./vendor_mui-iYS_J-ov.js";import{L as ue,D as v,S as he}from"./vendor_mui_icon-IEGRFchF.js";import"./vendor-cHM2QFTF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();var c=(e=>(e[e.END=0]="END",e[e.SYMBOL=1]="SYMBOL",e[e.KEYWORD=2]="KEYWORD",e[e.LEFT_PAREN=3]="LEFT_PAREN",e[e.RIGHT_PAREN=4]="RIGHT_PAREN",e[e.LEFT_CURLY=5]="LEFT_CURLY",e[e.RIGHT_CURLY=6]="RIGHT_CURLY",e[e.SEMICOLON=7]="SEMICOLON",e[e.WHITE_SPACE=8]="WHITE_SPACE",e))(c||{});const xe=["for","if","else","while","do"],O={"{":5,"}":6,"(":3,")":4,";":7},fe=e=>({content:e.normalize(),contentLength:e.normalize().length,cursorPos:0}),ge=e=>{const t={kind:0,text:""};if(e.cursorPos>=e.contentLength)return t;if(/\s/.test(e.content[e.cursorPos]))return t.kind=8,t.text=e.content[e.cursorPos],e.cursorPos++,t;if(t.text=e.content[e.cursorPos],e.cursorPos++,t.text in O)return t.kind=O[t.text],t;for(;e.cursorPos<e.contentLength&&!(e.content[e.cursorPos]in O)&&!/\s/.test(e.content[e.cursorPos]);)t.text+=e.content[e.cursorPos],e.cursorPos++;return xe.includes(t.text)?(t.kind=2,t):(t.kind=1,t)},me=e=>{const t=[];let o;for(;(o=ge(e)).kind!==0;)t.push(o);return t};var m=(e=>(e[e.END=0]="END",e[e.PROCESS=1]="PROCESS",e[e.LOOP_FIRST=2]="LOOP_FIRST",e[e.LOOP_LAST=3]="LOOP_LAST",e[e.IF_ELSE=4]="IF_ELSE",e))(m||{});const E=e=>({tokens:e,tokenLength:e.length,cursorPos:0}),L=(e,t,o)=>{if(e.cursorPos>=e.tokenLength)return[];if(e.tokens[e.cursorPos].kind!==t)return[];e.cursorPos++;const s=[];let n=-1,i;for(;e.cursorPos<e.tokenLength&&(i=e.tokens[e.cursorPos],e.cursorPos++,i.kind===t&&n--,i.kind===o&&n++,n!==0);)s.push(i);return s},h=e=>{for(;e.cursorPos<e.tokenLength&&e.tokens[e.cursorPos].kind===c.WHITE_SPACE;)e.cursorPos++},Le=e=>{const t={kind:2,body:[],condition:[]};return h(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==c.LEFT_PAREN||(t.condition=L(e,c.LEFT_PAREN,c.RIGHT_PAREN),h(e),e.cursorPos>=e.tokenLength)||e.tokens[e.cursorPos].kind!==c.LEFT_CURLY||(t.body=k(E(L(e,c.LEFT_CURLY,c.RIGHT_CURLY)))),t},Pe=e=>{const t={kind:3,body:[],condition:[]};return h(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==c.LEFT_CURLY||(t.body=k(E(L(e,c.LEFT_CURLY,c.RIGHT_CURLY))),h(e),e.cursorPos>=e.tokenLength)||e.tokens[e.cursorPos].kind!==c.KEYWORD||e.tokens[e.cursorPos].text!=="while"||(e.cursorPos++,h(e),e.cursorPos>=e.tokenLength)||e.tokens[e.cursorPos].kind!==c.LEFT_PAREN||(t.condition=L(e,c.LEFT_PAREN,c.RIGHT_PAREN),h(e),e.cursorPos>=e.tokenLength)||e.tokens[e.cursorPos].kind===c.SEMICOLON&&e.cursorPos++,t},je=e=>{const t={kind:4,condition:[],bodyIf:[],bodyElse:[]};return h(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==c.LEFT_PAREN||(t.condition=L(e,c.LEFT_PAREN,c.RIGHT_PAREN),h(e),e.cursorPos>=e.tokenLength)||e.tokens[e.cursorPos].kind!==c.LEFT_CURLY||(t.bodyIf=k(E(L(e,c.LEFT_CURLY,c.RIGHT_CURLY))),h(e),e.cursorPos>=e.tokenLength)||e.tokens[e.cursorPos].kind!==c.KEYWORD||e.tokens[e.cursorPos].text!=="else"||(e.cursorPos++,h(e),e.cursorPos>=e.tokenLength)||e.tokens[e.cursorPos].kind!==c.LEFT_CURLY||(t.bodyElse=k(E(L(e,c.LEFT_CURLY,c.RIGHT_CURLY)))),t},Ee=e=>{if(h(e),e.cursorPos>=e.tokenLength)return{kind:0};let t=e.tokens[e.cursorPos];if(e.cursorPos++,t.kind===c.KEYWORD)switch(t.text){case"for":case"while":return Le(e);case"do":return Pe(e);case"if":return je(e)}const o={kind:1,body:[]};if(t.kind===c.SEMICOLON)return o;for(o.body.push(t);e.cursorPos<e.tokenLength&&(t=e.tokens[e.cursorPos],e.cursorPos++,!(t.kind===c.END||t.kind===c.SEMICOLON));)o.body.push(t);return o},k=e=>{const t=[];let o;for(;(o=Ee(e)).kind!==0;)t.push(o);return t},y=e=>{const{children:t,borderTop:o,borderBottom:s,borderLeft:n,borderRight:i}=e;return r.jsx(x,{height:"100%",sx:{borderColor:"inherit",backgroundColor:"inherit",borderStyle:"solid",borderLeftWidth:n?"inherit":0,borderTopWidth:o?"inherit":0,borderBottomWidth:s?"inherit":0,borderRightWidth:i?"inherit":0},children:t})},ke=e=>{const{sx:t}=e;return r.jsx(B,{sx:{position:"absolute",width:"100%",height:"100%",...t},children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none",viewBox:"0 0 5 5",strokeWidth:"0.1",children:r.jsx("line",{x1:"0",y1:"0",x2:"5",y2:"5",stroke:"currentColor",strokeLinecap:"round"})})})},be=e=>{const{sx:t}=e;return r.jsx(B,{sx:{position:"absolute",width:"100%",height:"100%",...t},children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none",viewBox:"0 0 5 5",strokeWidth:"0.1",children:r.jsx("line",{x1:"0",y1:"5",x2:"5",y2:"0",stroke:"currentColor",strokeLinecap:"round"})})})},P=e=>{const{children:t,...o}=e;return r.jsx(Y,{fontFamily:"inherit",fontWeight:"inherit",padding:1,paddingLeft:2,...o,children:t??"..."})},b=e=>{const{text:t,...o}=e;return r.jsx(y,{...o,children:r.jsx(P,{children:t})})},Se=e=>{const{condition:t,body:o,...s}=e;let n=r.jsx(b,{borderTop:!0,borderLeft:!0});return o.length>0&&(n=o.map((i,l)=>r.jsx(S,{borderTop:!0,borderLeft:!0,node:i},`subnode-${l}`))),r.jsxs(y,{...s,children:[r.jsx(P,{children:t}),r.jsx(x,{paddingLeft:2,children:n})]})},ve=e=>{const{condition:t,body:o,...s}=e;let n=r.jsx(b,{borderBottom:!0,borderLeft:!0});return o.length>0&&(n=o.map((i,l)=>r.jsx(S,{node:i,borderBottom:!0,borderLeft:!0},`subnode-${l}`))),r.jsxs(y,{...s,children:[r.jsx(x,{paddingLeft:2,children:n}),r.jsx(P,{children:t})]})},Re=e=>{const{condition:t,bodyIf:o,bodyElse:s,...n}=e;let i=r.jsx(b,{borderTop:!0,borderRight:!0});o.length>0&&(i=o.map((j,f)=>r.jsx(S,{borderTop:!0,borderRight:!0,node:j},`index-${f}`)));let l=r.jsx(b,{borderTop:!0});return s.length>0&&(l=s.map((j,f)=>r.jsx(S,{borderTop:!0,node:j},`index-${f}`))),r.jsx(y,{...n,children:r.jsxs(g,{container:!0,height:"100%",children:[r.jsx(g,{item:!0,xs:12,children:r.jsx(P,{children:t})}),r.jsx(g,{item:!0,xs:6,children:r.jsxs(x,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[r.jsx(ke,{color:"inherit"}),r.jsx(P,{sx:{zIndex:2,backgroundColor:N[300]},children:"True"})]})}),r.jsx(g,{item:!0,xs:6,children:r.jsxs(x,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[r.jsx(be,{color:"inherit"}),r.jsx(P,{sx:{zIndex:2,backgroundColor:N[300]},children:"False"})]})}),r.jsx(g,{item:!0,xs:6,children:i}),r.jsx(g,{item:!0,xs:6,children:l})]})})},R=e=>e.kind!==m.PROCESS||e.body.map(t=>t.text).join("").trim().length>0,S=e=>{const{node:t,...o}=e;switch(t.kind){case m.LOOP_FIRST:{let s;return t.condition.length>0&&(s=t.condition.map(n=>n.text).join("").trim()),r.jsx(Se,{...o,condition:s,body:t.body.filter(R)})}case m.LOOP_LAST:{let s;return t.condition.length>0&&(s=t.condition.map(n=>n.text).join("").trim()),r.jsx(ve,{...o,condition:s,body:t.body.filter(R)})}case m.IF_ELSE:{let s;return t.condition.length>0&&(s=t.condition.map(n=>n.text).join("").trim()),r.jsx(Re,{...o,condition:s,bodyIf:t.bodyIf.filter(R),bodyElse:t.bodyElse.filter(R)})}case m.PROCESS:{let s=t.body.map(n=>n.text).join("").trim();return s.length===0&&(s=void 0),r.jsx(b,{...o,text:s})}}return r.jsx(u.Fragment,{})},we=(e,t,o)=>{let s=r.jsx(Y,{fontFamily:"inherit",fontStyle:"italic",children:"Nothing to display."});const n=e.filter(i=>i.kind!==m.PROCESS||i.body.map(l=>l.text).join("").trim().length>0);return n.length>0&&(s=n.map((i,l)=>r.jsx(S,{node:i,borderLeft:!0,borderTop:!0,borderRight:!0,borderBottom:l===n.length-1},l))),r.jsx(x,{sx:o,children:r.jsx(x,{id:t,maxWidth:"640px",fontFamily:"Fira Code",sx:{wordBreak:"break-all",fontVariantLigatures:"contextual",userSelect:"none"},children:s})})},ye=e=>{const{value:t,onValueChange:o,boxProps:s}=e;return r.jsx(x,{sx:s,children:r.jsx(q,{value:t,onChange:o,theme:"dark"})})},G=e=>{const{collapse:t,...o}=e;return t?r.jsx(oe,{title:o.children,children:r.jsxs(w,{...o,startIcon:void 0,endIcon:void 0,children:[o.startIcon,o.endIcon]})}):r.jsx(w,{...o,startIcon:o.startIcon,endIcon:o.endIcon,children:o.children})},Ce=()=>{const{enqueueSnackbar:e}=Z(),t=ne(d=>d.breakpoints.down("md")),[o,s]=u.useState(null),[n,i]=u.useState(()=>{const a=new URL(window.location.href).searchParams.get("preview");return a===null?!1:a==="true"}),[l,j]=u.useState([]),[f,M]=u.useState(()=>{const a=new URL(window.location.href).searchParams.get("content");if(a!==null)return window.localStorage.setItem("content",a),a;const _=window.localStorage.getItem("content");return _!==null?_:""});u.useEffect(()=>{const d=me(fe(f)),a=k(E(d));j(a)},[f]);const H=u.useCallback(d=>{M(d),window.localStorage.setItem("content",d)},[]),U=u.useCallback(async()=>{const d=document.getElementById("structogram-preview-region");d!==null&&(ee(d).then(a=>{a!==null&&(window.saveAs?window.saveAs(a,"structogram"):C.saveAs(a,"structogram"))}),e("Saved structogram as SVG",{variant:"info"}))},[e]),W=u.useCallback(async()=>{const d=document.getElementById("structogram-preview-region");d!==null&&(te(d).then(a=>{a!==null&&(window.saveAs?window.saveAs(a,"structogram"):C.saveAs(a,"structogram"))}),e("Saved structogram as PNG",{variant:"info"}))},[e]),D=u.useCallback(async()=>{const d=document.getElementById("structogram-preview-region");d!==null&&(re(d).then(a=>{a!==null&&(window.saveAs?window.saveAs(a,"structogram"):C.saveAs(a,"structogram"))}),e("Saved structogram as JPEG",{variant:"info"}))},[e]),z=u.useCallback(()=>{i(d=>!d)},[]),V=u.useCallback(()=>{const d=new URL(window.location.href);d.searchParams.set("preview","true"),d.searchParams.set("content",f),navigator.clipboard.writeText(d.href),e("Copied link to clipboard",{variant:"info"})},[f,e]),J=u.useCallback(d=>{s(d.currentTarget)},[]),$=u.useCallback(()=>{s(null)},[]);return r.jsxs(u.Fragment,{children:[r.jsxs(x,{children:[r.jsx(A,{square:!0,elevation:0,sx:{padding:1},children:r.jsxs(se,{display:"flex",direction:"row",justifyContent:"space-between",children:[r.jsxs(F,{variant:"outlined",children:[r.jsx(w,{onClick:z,children:n?"Show code":"Hide code"}),r.jsx(w,{href:"https://eurydia.github.io/project-nassi-shneiderman-diagram-builder-online-docs/",component:"a",target:"_blank",endIcon:r.jsx(ue,{}),children:"docs"})]}),r.jsxs(F,{variant:"outlined",children:[r.jsx(G,{collapse:t,startIcon:r.jsx(v,{}),onClick:J,children:"EXPORT"}),r.jsx(G,{collapse:t,endIcon:r.jsx(he,{}),onClick:V,children:"SHARE"})]})]})}),r.jsx(x,{children:r.jsxs(g,{container:!0,children:[r.jsx(g,{item:!0,xs:12,lg:6,display:n?"none":void 0,children:r.jsx(ye,{value:f,onValueChange:H,boxProps:{overflowY:"auto",height:"calc(100vh - 61.6833px)"}})}),r.jsx(g,{item:!0,xs:!0,lg:!0,display:n?void 0:"none",children:we(l,"structogram-preview-region",{padding:4,overflowY:"auto",backgroundColor:N[300],height:"calc(100vh - 61.6833px)"})})]})})]}),r.jsx(ie,{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},anchorEl:o,open:o!==null,onClose:$,children:r.jsx(A,{sx:{padding:1},children:r.jsxs(ce,{children:[r.jsxs(p,{onClick:D,children:[r.jsx(I,{children:r.jsx(v,{fontSize:"small"})}),r.jsx(T,{children:"Save as JPEG"})]}),r.jsxs(p,{onClick:W,children:[r.jsx(I,{children:r.jsx(v,{fontSize:"small"})}),r.jsx(T,{children:"Save as PNG"})]}),r.jsxs(p,{onClick:U,children:[r.jsx(I,{children:r.jsx(v,{fontSize:"small"})}),r.jsx(T,{children:"Save as SVG"})]})]})})})]})},pe=de({palette:{mode:"dark"}}),Ie=()=>r.jsxs(u.Fragment,{children:[r.jsx(ae,{}),r.jsx(le,{theme:pe,children:r.jsx(K,{preventDuplicate:!0,autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"center"},children:r.jsx(Ce,{})})})]});X.createRoot(document.getElementById("root")).render(r.jsx(Q.StrictMode,{children:r.jsx(Ie,{})}));
