import{k as e,r as o,a3 as n,a4 as r,a5 as t,a6 as s,a7 as i,a8 as c,a0 as d}from"./vendor-Q4L3HY8-.js";import{u as l,S as a}from"./vendor_notistack-S_WITeLc.js";import{S as u,B as h,G as x,g,a as j,T as k,b as m,d as L,u as P,P as b,e as p,f,M as E,h as R,L as C,i as v,j as y,C as w,k as T}from"./vendor_mui-VQxouIhY.js";import{L as S,D as I,S as _}from"./vendor_mui_icon-3zV7h8mC.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)})).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?o.credentials="include":"anonymous"===e.crossOrigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();var O=(e=>(e[e.END=0]="END",e[e.SYMBOL=1]="SYMBOL",e[e.KEYWORD=2]="KEYWORD",e[e.LEFT_PAREN=3]="LEFT_PAREN",e[e.RIGHT_PAREN=4]="RIGHT_PAREN",e[e.LEFT_CURLY=5]="LEFT_CURLY",e[e.RIGHT_CURLY=6]="RIGHT_CURLY",e[e.SEMICOLON=7]="SEMICOLON",e[e.WHITE_SPACE=8]="WHITE_SPACE",e))(O||{});const F=["for","if","else","while","do","func","proc"],A={"{":5,"}":6,"(":3,")":4,";":7},N=e=>{const o={kind:0,text:""};if(e.cursorPos>=e.contentLength)return o;if(/\s/.test(e.content[e.cursorPos]))return o.kind=8,o.text=e.content[e.cursorPos],e.cursorPos++,o;if(o.text=e.content[e.cursorPos],e.cursorPos++,o.text in A)return o.kind=A[o.text],o;for(;e.cursorPos<e.contentLength&&!(e.content[e.cursorPos]in A)&&!/\s/.test(e.content[e.cursorPos]);)o.text+=e.content[e.cursorPos],e.cursorPos++;return F.includes(o.text)?(o.kind=2,o):(o.kind=1,o)};var Y=(e=>(e[e.END=0]="END",e[e.PROCESS=1]="PROCESS",e[e.LOOP_FIRST=2]="LOOP_FIRST",e[e.LOOP_LAST=3]="LOOP_LAST",e[e.IF_ELSE=4]="IF_ELSE",e[e.FUNC=5]="FUNC",e))(Y||{});const U=e=>({tokens:e,tokenLength:e.length,cursorPos:0}),G=(e,o,n)=>{if(e.cursorPos>=e.tokenLength)return[];if(e.tokens[e.cursorPos].kind!==o)return[];e.cursorPos++;const r=[];let t,s=-1;for(;e.cursorPos<e.tokenLength&&(t=e.tokens[e.cursorPos],e.cursorPos++,t.kind===o&&s--,t.kind===n&&s++,0!==s);)r.push(t);return r},H=e=>{for(;e.cursorPos<e.tokenLength&&e.tokens[e.cursorPos].kind===O.WHITE_SPACE;)e.cursorPos++},W=e=>{if(H(e),e.cursorPos>=e.tokenLength)return{kind:0};let o=e.tokens[e.cursorPos];if(e.cursorPos++,o.kind===O.KEYWORD)switch(o.text){case"func":case"proc":return(e=>{const o={kind:5,name:[],args:[],body:[]};return H(e),e.cursorPos>=e.tokenLength||(H(e),e.cursorPos>=e.tokenLength||(o.name.push(e.tokens[e.cursorPos]),e.cursorPos++,H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_PAREN||(o.args=G(e,O.LEFT_PAREN,O.RIGHT_PAREN),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.body=B(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))))))),o})(e);case"for":case"while":return(e=>{const o={kind:2,body:[],condition:[]};return H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_PAREN||(o.condition=G(e,O.LEFT_PAREN,O.RIGHT_PAREN),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.body=B(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))))),o})(e);case"do":return(e=>{const o={kind:3,body:[],condition:[]};return H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.body=B(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.KEYWORD||"while"!==e.tokens[e.cursorPos].text||(e.cursorPos++,H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_PAREN||(o.condition=G(e,O.LEFT_PAREN,O.RIGHT_PAREN),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind===O.SEMICOLON&&e.cursorPos++))),o})(e);case"if":return(e=>{const o={kind:4,condition:[],bodyIf:[],bodyElse:[]};return H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_PAREN||(o.condition=G(e,O.LEFT_PAREN,O.RIGHT_PAREN),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.bodyIf=B(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))),H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.KEYWORD||"else"!==e.tokens[e.cursorPos].text||(e.cursorPos++,H(e),e.cursorPos>=e.tokenLength||e.tokens[e.cursorPos].kind!==O.LEFT_CURLY||(o.bodyElse=B(U(G(e,O.LEFT_CURLY,O.RIGHT_CURLY))))))),o})(e)}const n={kind:1,body:[]};if(o.kind===O.SEMICOLON)return n;for(n.body.push(o);e.cursorPos<e.tokenLength&&(o=e.tokens[e.cursorPos],e.cursorPos++,o.kind!==O.END&&o.kind!==O.SEMICOLON);)n.body.push(o);return n},B=e=>{const o=[];let n;for(;0!==(n=W(e)).kind;)o.push(n);return o},D=o=>{const{sx:n}=o;return e.jsx(u,{sx:{position:"absolute",width:"100%",height:"100%",...n},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none",viewBox:"0 0 5 5",strokeWidth:"0.1",children:e.jsx("line",{x1:"0",y1:"0",x2:"5",y2:"5",stroke:"currentColor",strokeLinecap:"round"})})})},z=o=>{const{sx:n}=o;return e.jsx(u,{sx:{position:"absolute",width:"100%",height:"100%",...n},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none",viewBox:"0 0 5 5",strokeWidth:"0.1",children:e.jsx("line",{x1:"0",y1:"5",x2:"5",y2:"0",stroke:"currentColor",strokeLinecap:"round"})})})},M=o=>{const{children:n,borderTop:r,borderBottom:t,borderLeft:s,borderRight:i}=o;return e.jsx(h,{sx:{borderStyle:"solid",borderLeftWidth:s?2:0,borderTopWidth:r?2:0,borderBottomWidth:t?2:0,borderRightWidth:i?2:0},children:n})},$=o=>{const{children:n,...r}=o;return e.jsx(k,{padding:1.5,...r,sx:{fontFamily:"Fira Code",wordBreak:"break-word",fontVariantLigatures:"contextual",...r.sx},children:n??"..."})},K=o=>{const{text:n,...r}=o;return e.jsx(M,{...r,children:e.jsx($,{children:n})})},V=o=>{const{condition:n,body:r,...t}=o;let s=e.jsx(K,{borderTop:!0,borderLeft:!0});return r.length>0&&(s=r.map(((o,n)=>e.jsx(Z,{borderTop:!0,borderLeft:!0,node:o},`subnode-${n}`)))),e.jsxs(M,{...t,children:[e.jsx($,{children:n}),e.jsx(h,{paddingLeft:2,children:s})]})},q=o=>{const{condition:n,body:r,...t}=o;let s=e.jsx(K,{borderBottom:!0,borderLeft:!0});return r.length>0&&(s=r.map(((o,n)=>e.jsx(Z,{node:o,borderBottom:!0,borderLeft:!0},`subnode-${n}`)))),e.jsxs(M,{...t,children:[e.jsx(h,{paddingLeft:2,children:s}),e.jsx($,{children:n})]})},J=o=>{const{condition:n,bodyIf:r,bodyElse:t,...s}=o;let i=e.jsx(K,{borderTop:!0});r.length>0&&(i=r.map(((o,n)=>e.jsx(Z,{borderTop:!0,node:o},`index-${n}`))));let c=e.jsx(K,{borderTop:!0});return t.length>0&&(c=t.map(((o,n)=>e.jsx(Z,{borderTop:!0,node:o},`index-${n}`)))),e.jsx(M,{...s,children:e.jsxs(x,{container:!0,height:"100%",children:[e.jsx(x,{item:!0,xs:12,children:e.jsx($,{align:"center",children:n})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(h,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[e.jsx($,{sx:{zIndex:2,backgroundColor:g[300]},children:"True"}),e.jsx(D,{htmlColor:"black"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(h,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",children:[e.jsx(z,{}),e.jsx($,{sx:{zIndex:2,backgroundColor:g[300]},children:"False"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(j,{height:"100%",sx:{borderColor:"inherit",borderRightStyle:"solid",borderRightWidth:2},children:i})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(j,{height:"100%",children:c})})]})})},X=o=>{const{declaration:n,body:r,...t}=o;let s=e.jsx(K,{borderTop:!0,borderLeft:!0,borderRight:!0});return r.length>0&&(s=r.map(((o,n)=>e.jsx(Z,{node:o,borderTop:!0,borderLeft:!0,borderRight:!0},`subnode-${n}`)))),e.jsxs(M,{...t,children:[e.jsx($,{align:"center",children:n}),e.jsx(h,{paddingX:2,children:s})]})},Q=e=>e.kind!==Y.PROCESS||e.body.map((e=>e.text)).join("").trim().length>0,Z=n=>{const{node:r,...t}=n;switch(r.kind){case Y.FUNC:{let o="...";r.name.length>0&&(o=r.name.map((e=>e.text)).join(""));const n=`${o}(${r.args.map((e=>e.text)).join("")})`;return e.jsx(X,{declaration:n,body:r.body,...t})}case Y.LOOP_FIRST:{let o;return r.condition.length>0&&(o=r.condition.map((e=>e.text)).join("").trim()),e.jsx(V,{...t,condition:o,body:r.body.filter(Q)})}case Y.LOOP_LAST:{let o;return r.condition.length>0&&(o=r.condition.map((e=>e.text)).join("").trim()),e.jsx(q,{...t,condition:o,body:r.body.filter(Q)})}case Y.IF_ELSE:{let o;return r.condition.length>0&&(o=r.condition.map((e=>e.text)).join("").trim()),e.jsx(J,{...t,condition:o,bodyIf:r.bodyIf.filter(Q),bodyElse:r.bodyElse.filter(Q)})}case Y.PROCESS:{let o=r.body.map((e=>e.text)).join("").trim();return 0===o.length&&(o=void 0),e.jsx(K,{...t,text:o})}}return e.jsx(o.Fragment,{})},ee=(o,n,r)=>{let t=e.jsx(k,{fontFamily:"inherit",fontStyle:"italic",children:"Nothing to display."});const s=o.filter((e=>e.kind!==Y.PROCESS||e.body.map((e=>e.text)).join("").trim().length>0));return s.length>0&&(t=s.map(((o,n)=>e.jsx(Z,{node:o,borderLeft:!0,borderTop:!0,borderRight:!0,borderBottom:n===s.length-1},n)))),e.jsx(h,{sx:r,children:e.jsx(h,{id:n,maxWidth:"640px",children:t})})},oe=o=>{const{value:r,onValueChange:t,boxProps:s}=o;return e.jsx(h,{sx:s,children:e.jsx(n,{value:r,onChange:t,theme:"dark"})})},ne=o=>{const{collapse:n,...r}=o;return n?e.jsx(m,{title:r.children,children:e.jsxs(L,{...r,startIcon:void 0,endIcon:void 0,children:[r.startIcon,r.endIcon]})}):e.jsx(L,{...r,startIcon:r.startIcon,endIcon:r.endIcon,children:r.children})},re=()=>{const{enqueueSnackbar:n}=l(),c=P((e=>e.breakpoints.down("md"))),[d,a]=o.useState(null),[u,k]=o.useState((()=>{const e=new URL(window.location.href).searchParams.get("preview");return null!==e&&"true"===e})),[m,y]=o.useState([]),[w,T]=o.useState((()=>{const e=new URL(window.location.href).searchParams.get("content");if(null!==e)return window.localStorage.setItem("content",e),e;const o=window.localStorage.getItem("content");return null!==o?o:""}));o.useEffect((()=>{const e=(e=>{const o=[];let n;for(;0!==(n=N(e)).kind;)o.push(n);return o})({content:(o=w).normalize(),contentLength:o.normalize().length,cursorPos:0});var o;const n=B(U(e));y(n)}),[w]);const O=o.useCallback((e=>{T(e),window.localStorage.setItem("content",e)}),[]),F=o.useCallback((async()=>{const e=document.getElementById("structogram-preview-region");null!==e&&(r(e).then((e=>{null!==e&&(window.saveAs?window.saveAs(e,"structogram"):t.saveAs(e,"structogram"))})),n("Saved structogram as SVG",{variant:"info"}))}),[n]),A=o.useCallback((async()=>{const e=document.getElementById("structogram-preview-region");null!==e&&(s(e).then((e=>{null!==e&&(window.saveAs?window.saveAs(e,"structogram"):t.saveAs(e,"structogram"))})),n("Saved structogram as PNG",{variant:"info"}))}),[n]),Y=o.useCallback((async()=>{const e=document.getElementById("structogram-preview-region");null!==e&&(i(e).then((e=>{null!==e&&(window.saveAs?window.saveAs(e,"structogram"):t.saveAs(e,"structogram"))})),n("Saved structogram as JPEG",{variant:"info"}))}),[n]),G=o.useCallback((()=>{k((e=>!e))}),[]),H=o.useCallback((()=>{const e=new URL(window.location.href);e.searchParams.set("preview","true"),e.searchParams.set("content",w),navigator.clipboard.writeText(e.href),n("Copied link to clipboard",{variant:"info"})}),[w,n]),W=o.useCallback((e=>{a(e.currentTarget)}),[]),D=o.useCallback((()=>{a(null)}),[]);return e.jsxs(o.Fragment,{children:[e.jsxs(h,{sx:{height:"100vh",overflowY:"hidden"},children:[e.jsx(b,{square:!0,elevation:0,sx:{padding:1},children:e.jsxs(j,{display:"flex",direction:"row",justifyContent:"space-between",children:[e.jsxs(p,{variant:"outlined",children:[e.jsx(L,{onClick:G,children:u?"Show code":"Hide code"}),e.jsx(L,{href:"https://eurydia.github.io/project-nassi-shneiderman-diagram-builder-online-docs/",component:"a",target:"_blank",endIcon:e.jsx(S,{}),children:"docs"})]}),e.jsxs(p,{variant:"outlined",children:[e.jsx(ne,{collapse:c,startIcon:e.jsx(I,{}),onClick:W,children:"EXPORT"}),e.jsx(ne,{collapse:c,endIcon:e.jsx(_,{}),onClick:H,children:"SHARE"})]})]})}),e.jsx(h,{children:e.jsxs(x,{container:!0,children:[e.jsx(x,{item:!0,xs:12,lg:6,display:u?"none":void 0,children:e.jsx(oe,{value:w,onValueChange:O,boxProps:{overflowY:"auto",height:"100vh"}})}),e.jsx(x,{item:!0,xs:!0,lg:!0,display:c&&!u?"none":void 0,children:ee(m,"structogram-preview-region",{padding:4,overflowY:"auto",backgroundColor:g[300],borderColor:g[700],height:"100vh",userSelect:"none"})})]})})]}),e.jsx(f,{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},anchorEl:d,open:null!==d,onClose:D,children:e.jsx(b,{sx:{padding:1},children:e.jsxs(E,{children:[e.jsxs(R,{onClick:Y,children:[e.jsx(C,{children:e.jsx(I,{fontSize:"small"})}),e.jsx(v,{children:"Save as JPEG"})]}),e.jsxs(R,{onClick:A,children:[e.jsx(C,{children:e.jsx(I,{fontSize:"small"})}),e.jsx(v,{children:"Save as PNG"})]}),e.jsxs(R,{onClick:F,children:[e.jsx(C,{children:e.jsx(I,{fontSize:"small"})}),e.jsx(v,{children:"Save as SVG"})]})]})})})]})},te=y({palette:{mode:"dark"}}),se=()=>e.jsxs(o.Fragment,{children:[e.jsx(w,{}),e.jsx(T,{theme:te,children:e.jsx(a,{preventDuplicate:!0,autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(re,{})})})]});c.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(se,{})}));
//# sourceMappingURL=index-Dsfdg_Ox.js.map
